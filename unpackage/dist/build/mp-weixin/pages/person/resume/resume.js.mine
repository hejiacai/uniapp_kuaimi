(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/person/resume/resume"],{"08dd":function(e,t,s){"use strict";s.r(t);var i=s("9a9c"),o=s("b033");for(var a in o)"default"!==a&&function(e){s.d(t,e,function(){return o[e]})}(a);s("6048");var r=s("2877"),n=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,"23e1d85a",null);t["default"]=n.exports},"18ae":function(e,t,s){},6048:function(e,t,s){"use strict";var i=s("18ae"),o=s.n(i);o.a},"9a9c":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},o=[];s.d(t,"a",function(){return i}),s.d(t,"b",function(){return o})},ac86:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s("a7a3")),o=s("2f62");function a(e){return e&&e.__esModule?e:{default:e}}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},i=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),i.forEach(function(t){n(e,t,s[t])})}return e}function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var u=function(){return s.e("components/uni-popup/uni-popup").then(s.bind(null,"a7b1"))};function c(e){var t=new Date,s=t.getFullYear(),i=t.getMonth()+1,o=t.getDate();return"start"===e?s-=60:"end"===e&&(s+=2),i=i>9?i:"0"+i,o=o>9?o:"0"+o,"".concat(s,"-").concat(i,"-").concat(o)}var d={components:{uniPopup:u},data:function(){return{isshowOne:!0,isChecked:"",change_resume_state_show:!1,photoImg:"",workExp:"",showCode:!1,content:"修改成功",showpopup:!1,type:"center",curPlace:"",showjobsortList:"",referJob:!0,resumeWeight:"",txtUserName:"",txtUserPhone:"",imgCode:"",verCode:"",codeImage:"",seed:"",cdtime:60,verText:"获取验证码",vartextArr:["获取验证码","秒后可重新获取","重新获取验证码"],sendVerStatus:0,genderList:[{id:"1",name:"男"},{id:"2",name:"女"}],eduList:[{id:"1",name:"初中"},{id:"2",name:"高中"}],heightList:[],workStatusList:[{id:"1",name:"不在职，正在找工作"},{id:"2",name:"在职，打算近期换工作"}],moneyList:[{id:"01",name:"1000及以上"},{id:"02",name:"1500及以上"}],obj:{gender:0,edu:0,height:0,workStatus:0,money:0},date:c({format:!0}),startDate:c("start"),endDate:c("end"),certificateList:[],resumeList:{},jobsortList:[]}},onReady:function(){},onLoad:function(){this.getSeed(),this.bodyHigh()},onShow:function(){this.token||e.reLaunch({url:"../../login/login"}),this.get_resume_info(),this.init(),this.getMore(),this.get_salary()},computed:r({},(0,o.mapState)(["token","presentAddress","jobCategory","newLiveAddress","ediresumeList"])),methods:r({},(0,o.mapMutations)(["saveEdiResumeList"]),{showPhoneCode:function(){this.showCode=!0},cancel_resume_state:function(){this.isshowOne=!1,this.isChecked="",this.isChecked=!0,this.isshowOne=!0,this.resumeList.open_mode="1",this.change_resume_state_show=!1,console.log("状态",this.isChecked)},change_resume_state:function(){this.isChecked="",this.isChecked=!1,this.change_resume_state_show=!1,this.resumeList.open_mode="0",console.log("简历状态",this.resumeList.open_mode)},modi_resume_state:function(e){console.log(e.target.value),"1"==this.resumeList.open_mode?this.change_resume_state_show=!0:(this.isChecked="",this.isChecked=!0,this.resumeList.open_mode="1",console.log("简历状态",this.resumeList.open_mode))},upload:function(){var t=this;e.chooseImage({count:1,success:function(s){console.log("上传的图片",s);var i=new Date-0,o="http://blueuniapp.hb.com/index?ver=v1.0&apiname=photo_up&token="+t.token+"&FILE:"+s.tempFilePaths[0]+"&t="+i,a=s.tempFilePaths;console.log("上传的图片",t.tempFile);e.uploadFile({url:o,filePath:a[0],name:"file",success:function(s){var i=JSON.parse(s.data);t.photoImg=i.data.url,console.log("返回的图片地址",t.photoImg),e.showToast({title:"上传成功"})}})}})},upPhoto:function(){this.upload()},close_pop:function(){this.showpopup=!1,this.get_resume_info()},get_resume_info:function(){var e=this;this.$http.get(i.default.RESUME_INFO,{params:{token:this.token,is_sync_hb:0}}).then(function(t){if(t.data.success){console.log("请求简历成功",t.data.data),e.ediresumeList?(console.log("现在的所有数据",e.ediresumeList),e.resumeList="",e.resumeList=e.ediresumeList):e.resumeList=t.data.data,"1"==e.resumeList.open_mode?e.isChecked=!0:e.isChecked=!1,e.txtUserName=e.resumeList.user_name,e.photoImg=e.resumeList.photo,e.txtUserPhone=e.resumeList.mobile_phone,e.obj.gender=e.resumeList.sex-1;for(var s=0;s<e.eduList.length;s++)e.eduList[s].id===e.resumeList.max_degree_id&&(e.obj.edu=s);for(s=0;s<e.moneyList.length;s++)e.moneyList[s].id===e.resumeList.exp_salary&&(e.obj.money=s);for(s=0;s<e.workStatusList.length;s++)e.workStatusList[s].id==e.resumeList.job_state_id&&(e.obj.workStatus=s);for(s=0;s<e.heightList.length;s++)-1!==e.heightList[s].value.indexOf(e.resumeList.stature)&&(e.obj.height=s);if(e.certificateList=t.data.data.certificate_list,e.workExp=t.data.data.work_data,e.jobCategory&&e.jobCategory.length>0){e.jobsortList=[];var i=[],o=[];e.jobCategory.forEach(function(t){i.push(t.jobsort_name),o.push(t.jobsort),e.jobsortList.push(t)}),e.resumeList.str_expect_jobsorts=i.join(),e.resumeList.expect_jobsort_ids=o.join(),console.log("修改后的职位",e.showjobsortList)}else e.jobsortList=e.resumeList.expect_jobsort;if(e.presentAddress&&e.presentAddress.length>0){var a=[],r=[];e.presentAddress.forEach(function(e){a.push(e.name),r.push(e.value)}),e.resumeList.str_expect_areas=a.join(),e.resumeList.expect_area_ids=r.join(),console.log("修改后的地址",e.resumeList.str_expect_areas)}e.newLiveAddress&&e.newLiveAddress.length>0&&(e.resumeList.cur_area_id=e.newLiveAddress[0].value,e.resumeList.cur_area_name=e.newLiveAddress[0].name)}else console.log("请求简历失败")}).catch(function(e){throw e})},get_salary:function(){var e=this;this.$http.post(i.default.SALARY_COMMON,{}).then(function(t){t.data.success&&(e.moneyList=t.data.data.salarys)}).catch(function(e){console.log(e)})},getMore:function(){var e=this;this.$http.post(i.default.MORE_COMMON,{}).then(function(t){t.data.success&&(e.genderList=t.data.data.sexs_list,e.eduList=t.data.data.degree,e.workStatusList=t.data.data.job_status)}).catch(function(e){console.log(e)})},ediWorkxp:function(t){this.saveEdiResumeList(this.resumeList);var s=r({mode:"edit"},t);s=JSON.stringify(s),e.navigateTo({url:"./workexp/workexp?params=".concat(s)})},savePerInfo:function(){var e=this;this.showpopup=!0,this.$http.post(i.default.RESUMALTER,{params:{token:this.token,txtExpectAreaPut:this.resumeList.expect_area_ids,txtExpectPostPut:this.resumeList.expect_jobsort_ids,authCode:this.verCode?this.verCode:"",txtUserName:this.resumeList.user_name,txtGenderPut:this.resumeList.sex,txtBirthdayPut:this.resumeList.birthday,txtEducationPut:this.resumeList.max_degree_id,txtUserPhone:this.resumeList.mobile_phone,txtWorkStatePut:this.resumeList.job_state_id?this.resumeList.job_state_id:"",curPlace:this.resumeList.cur_area_id,stature:this.resumeList.stature,weight:this.resumeList.weight,photo:this.photoImg,txthidSalaryPut:this.resumeList.exp_salary}}).then(function(t){t.data.success?(console.log("ggggggg",t.data),e.get_resume_info()):e.$KM.showToast(t.data.msg)})},goAddress:function(){this.saveEdiResumeList(this.resumeList);var t=[],s={};this.newLiveAddress&&this.newLiveAddress.length>0?t=this.newLiveAddress:(s.name=this.resumeList.cur_area_name,s.value=this.resumeList.cur_area_id,t.push(s));var i={type:"nowLive",plac:t};i=JSON.stringify(i),e.navigateTo({url:"./presentAddress/presentAddress?params=".concat(i)})},goExAddress:function(){this.saveEdiResumeList(this.resumeList);var t=[];t=this.presentAddress?this.presentAddress:this.resumeList.expect_areas;var s={type:"expec_areas",plac:t};s=JSON.stringify(s),e.navigateTo({url:"./presentAddress/presentAddress?params=".concat(s)})},goJobCategory:function(){this.saveEdiResumeList(this.resumeList);var t={expect_jobsort:this.jobsortList};console.log("这边的职位点点大",this.jobsortList),t=JSON.stringify(t),e.navigateTo({url:"./jobCategory/jobCategory?params=".concat(t)})},pickerChange:function(e,t){var s=this;console.log("获取的值",e),console.log("获取的类型",t);var i=e.detail.value;switch(this.obj[t]=e.target.value,t){case"gender":this.genderList.forEach(function(e,t){i==t&&(s.resumeList.sex=i+1,console.log("性别的code",s.resumeList.sex))});break;case"edu":this.eduList.forEach(function(e,t){i==t&&(s.resumeList.max_degree_id=e.id,console.log("学历",s.resumeList.max_degree_id))});break;case"money":this.moneyList.forEach(function(e,t){i==t&&(s.resumeList.exp_salary=e.id,console.log("薪资",s.resumeList.exp_salary))});break;case"workStatus":this.workStatusList.forEach(function(e,t){i==t&&(s.resumeList.job_state_id=e.id,console.log("工作状态",s.resumeList.job_state_id))});break;case"height":this.heightList.forEach(function(e,t){i==t&&(s.resumeList.stature=e.value.slice(0,3),console.log("选择的身高",s.resumeList.stature))});break;default:break}},bindDateChange:function(e){this.resumeList.birthday=e.target.value},getSeed:function(){var e=this;this.$http.get(i.default.GET_SEED+"&=").then(function(t){1===t.data.code&&(e.seed=t.data.data.seed,e.codeImage="http://blueuniapp.hb.com/index?ver=v1.0&apiname=getImgCode&seed="+e.seed)}).catch(function(e){throw e})},getVerCode:function(){var t=this;""!==this.resumeList.mobile_phone?""!==this.imgCode?e.request({url:"http://blueuniapp.hb.com/index?ver=v1.0&apiname=sendLogCode&mobile_phone="+this.resumeList.mobile_phone+"&imgcode="+this.imgCode+"&hidSeed="+this.seed,method:"POST",data:{mobile_phone:this.resumeList.mobile_phone,imgcode:this.imgCode,hidSeed:this.seed},success:function(e){e.data.success?(t.sendVerStatus=1,t.verText=t.cdtime+t.vartextArr[t.sendVerStatus],t.countDown(),t.$KM.showToast("发送成功")):t.$KM.showToast(e.data.msg)},fail:function(e){throw e}}):this.$KM.showToast("请输入图形验证码"):this.$KM.showToast("请输入手机号")},countDown:function(){var e=this,t=setInterval(function(){e.cdtime>1?(e.cdtime--,e.verText=e.cdtime+e.vartextArr[e.sendVerStatus]):(clearInterval(t),e.cdtime=60,e.sendVerStatus=2,e.verText=e.vartextArr[e.sendVerStatus],e.getSeed())},1e3)},bodyHigh:function(){for(var e=[],t=[],s=140;s<221;s++){var i={};e[s]=s+"cm",i.value=e[s],t.push(i)}this.heightList=t,console.log("身高数组",this.heightList)},addCertificate:function(){this.saveEdiResumeList(this.resumeList);var t={mode:"add"};t=JSON.stringify(t),e.navigateTo({url:"./certificate/certificate?params=".concat(t)})},modiCer:function(t){this.saveEdiResumeList(this.resumeList);var s=r({mode:"edit"},t);s=JSON.stringify(s),e.navigateTo({url:"./certificate/certificate?params=".concat(s)})},init:function(){this.certificateList=JSON.parse(sessionStorage.getItem("certificateList"))||[]},addWorkexp:function(){this.saveEdiResumeList(this.resumeList);var t={mode:"add"};t=JSON.stringify(t),e.navigateTo({url:"./workexp/workexp?params=".concat(t)})}})};t.default=d}).call(this,s("543d")["default"])},b033:function(e,t,s){"use strict";s.r(t);var i=s("ac86"),o=s.n(i);for(var a in i)"default"!==a&&function(e){s.d(t,e,function(){return i[e]})}(a);t["default"]=o.a},f765:function(e,t,s){"use strict";(function(e){s("2887"),s("921b");i(s("66fd"));var t=i(s("08dd"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("543d")["createPage"])}},[["f765","common/runtime","common/vendor"]]]);